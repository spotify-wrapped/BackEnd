{{!-- Got rid of bootstrap --}}
{{!-- Got rid of graph features --}}
{{!-- Got rid of playlistAnalysis and related funcitonality --}}
{{!-- Clean up structure and delete unwanted features of topResults.html --}}
{{!-- Got rid of all css --}}
<div id="main">
    {{!-- Create Playlist --}}
    <button onClick="createPlaylist()">Create Playlist</button>

    <div>
        <h1>Top Songs</h1>
        <div id='top-songs'></div>
    </div>  
</div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Main -->
<script>
    const accessToken = sessionStorage.getItem('accessToken');
    $( document ).ready(async function(){
        try {
            const { items: topTracks } = await $.post(window.location.origin + '/top', { accessToken });
            displayTracks(topTracks); 
        }catch(err) {
            console.log(err);
            $("#main").append('<div>Please refresh page</div>');
        }
    });
</script>

<!-- Script for displaying top tracks list -->
<script>
    function displayTracks(topTracks){
        topTracks.forEach(track => {
            const { album, artists, id, name } = track;
            const { name: albumName } = album;

            const albumArt = album.images[1];

            $("#top-songs").append('<div id='+id+'></div>');
            $(`#${id}`).append('<p>Song: '+name+' | Album: '+albumName+'</p>');
            $(`#${id}`).append('<p>Artist: ' +artists[0].name+ '</p>');
            $(`#${id}`).append(`<img src=${albumArt.url} height=75/>`);
        });
    }
</script>

<!-- Script for create playlist button -->
<script>
    function createPlaylist(){
        $.post(
            window.location.origin + '/createPlaylist',
            {
                accessToken
            },
            (data, status) => {
                console.log(`Playlist Created! Data: ${data}, Status: ${status}`);
            }
        );
    }
</script>